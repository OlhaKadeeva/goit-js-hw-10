{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst input = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('[data-start]');\nconst dataElements = {\n  daysEl: document.querySelector('[data-days]'),\n  hoursEl: document.querySelector('[data-hours]'),\n  minutesEl: document.querySelector('[data-minutes]'),\n  secondsEl: document.querySelector('[data-seconds]'),\n};\n\nlet userSelectedDate; //датa, обранa користувачем\nlet currentInterval;\n\nconst flatpickrOptins = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  position: 'below left', //вертикаль і горизонталь\n  positionElement: input, //на нашому импуті для дати\n\n  //Метод onClose() з об'єкта параметрів викликається щоразу під час закриття елемента інтерфейсу, який створює flatpickr. Саме в ньому варто обробляти дату, обрану користувачем. Параметр selectedDates — це масив обраних дат, тому ми беремо перший елемент selectedDates[0].\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    console.log(userSelectedDate);\n    correctDate(userSelectedDate); //після валідації\n  },\n};\n\nconst timeUnits = {\n  days: 1000 * 60 * 60 * 24,\n  hours: 1000 * 60 * 60,\n  minutes: 1000 * 60,\n  seconds: 1000,\n};\n\n//Вішаємо прослуховувач на баттон start\nstartBtn.addEventListener('click', startTimer);\n\nflatpickr(input, flatpickrOptins);\n\n//Сповіщення для користувача через бібліотеку iziToast\nfunction showMessage() {\n  iziToast.show({\n    position: 'topRight',\n    title: 'Error',\n    titleColor: 'white',\n    messageColor: 'white',\n    backgroundColor: 'red',\n    message: 'Please choose a date in the future',\n    iconColor: 'white',\n  });\n}\n\nfunction checkDate(date) {\n  if (new Date(date) > new Date()) {\n    startBtn.disabled = false;\n    startBtn.classList.toggle('is-active');\n    //При обранні дати з майбутнього кнопка Start стає активною.\n    return true;\n  } else {\n    startBtn.disabled = true; //При обранні дати з минулого, кнопка Start стає неактивною і з’являється повідомлення\n    showMessage();\n    return false;\n  }\n}\n\n// Таймер це об'єкт, у якого є дві функції start і stop.\n//При натисканні на кнопку Start вона стає неактивною, на сторінку виводиться час, що лишився до обраної дати у форматі xx:xx:xx:xx, і запускається зворотний відлік часу до обраної дати.\nfunction startTimer() {\n  if (!checkDate(userSelectedDate)) return;\n\n  clearInterval(currentInterval);\n\n  currentInterval = setInterval(() => checkTimer(timeUnits), 1000);\n  input.disabled = true;\n  startBtn.disabled = true;\n}\n\n//Таймер зупиняється, коли доходить до кінцевої дати, тобто залишок часу дорівнює нулю і інтерфейс виглядає так 00:00:00:00\nfunction checkTimer(timeUnits) {\n  let totalTime = userSelectedDate - new Date();\n  if (totalTime <= 0) {\n    return stopTimer();\n  }\n\n  //Час в інтерфейсі відформатований і, якщо воно містить менше двох символів, на початку числа доданий 0.\n  const showTime = unit =>\n    Math.floor(totalTime / timeUnits[unit])\n      .toString()\n      .padStart(2, '0');\n\n  //виводимо контент\n  for (let key in timeUnits) {\n    dataElements[key + 'El'].textContent = showTime(key);\n    totalTime %= timeUnits[key];\n  }\n}\nfunction stopTimer() {\n  clearInterval(currentInterval);\n  input.disabled = false;\n}\n"],"names":["input","startBtn","dataElements","userSelectedDate","currentInterval","flatpickrOptins","selectedDates","timeUnits","startTimer","flatpickr","showMessage","iziToast","checkDate","date","checkTimer","totalTime","stopTimer","showTime","unit","key"],"mappings":"+IAMA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAe,CACnB,OAAQ,SAAS,cAAc,aAAa,EAC5C,QAAS,SAAS,cAAc,cAAc,EAC9C,UAAW,SAAS,cAAc,gBAAgB,EAClD,UAAW,SAAS,cAAc,gBAAgB,CACpD,EAEA,IAAIC,EACAC,EAEJ,MAAMC,EAAkB,CACtB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,SAAU,aACV,gBAAiBL,EAGjB,QAAQM,EAAe,CACrBH,EAAmBG,EAAc,CAAC,EAClC,QAAQ,IAAIH,CAAgB,EAC5B,YAAYA,CAAgB,CAC7B,CACH,EAEMI,EAAY,CAChB,KAAM,IAAO,GAAK,GAAK,GACvB,MAAO,IAAO,GAAK,GACnB,QAAS,IAAO,GAChB,QAAS,GACX,EAGAN,EAAS,iBAAiB,QAASO,CAAU,EAE7CC,EAAUT,EAAOK,CAAe,EAGhC,SAASK,GAAc,CACrBC,EAAS,KAAK,CACZ,SAAU,WACV,MAAO,QACP,WAAY,QACZ,aAAc,QACd,gBAAiB,MACjB,QAAS,qCACT,UAAW,OACf,CAAG,CACH,CAEA,SAASC,EAAUC,EAAM,CACvB,OAAI,IAAI,KAAKA,CAAI,EAAI,IAAI,MACvBZ,EAAS,SAAW,GACpBA,EAAS,UAAU,OAAO,WAAW,EAE9B,KAEPA,EAAS,SAAW,GACpBS,IACO,GAEX,CAIA,SAASF,GAAa,CACfI,EAAUT,CAAgB,IAE/B,cAAcC,CAAe,EAE7BA,EAAkB,YAAY,IAAMU,EAAWP,CAAS,EAAG,GAAI,EAC/DP,EAAM,SAAW,GACjBC,EAAS,SAAW,GACtB,CAGA,SAASa,EAAWP,EAAW,CAC7B,IAAIQ,EAAYZ,EAAmB,IAAI,KACvC,GAAIY,GAAa,EACf,OAAOC,EAAS,EAIlB,MAAMC,EAAWC,GACf,KAAK,MAAMH,EAAYR,EAAUW,CAAI,CAAC,EACnC,SAAU,EACV,SAAS,EAAG,GAAG,EAGpB,QAASC,KAAOZ,EACdL,EAAaiB,EAAM,IAAI,EAAE,YAAcF,EAASE,CAAG,EACnDJ,GAAaR,EAAUY,CAAG,CAE9B,CACA,SAASH,GAAY,CACnB,cAAcZ,CAAe,EAC7BJ,EAAM,SAAW,EACnB"}